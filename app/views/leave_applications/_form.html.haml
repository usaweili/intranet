= f.hidden_field :user_id
= f.input :leave_type, as: :radio_buttons, collection: [LeaveApplication::LEAVE, LeaveApplication::WFH], :item_wrapper_class => 'inline',
  checked: @leave_application.leave_type || LeaveApplication::LEAVE
= f.input :start_at, label: 'Start Date', input_html: { type: 'date', class: 'date-picker', min: Date.today.beginning_of_year.try(:strftime, "%Y-%m-%d"), max: Date.today.end_of_year.try(:strftime, "%Y-%m-%d"), data: { 'validation-required-message' => 'You must select start date'}, required: true, value: f.object.start_at.try(:strftime, "%Y-%m-%d")}
= f.input :end_at, label: 'End Date', input_html: { type: 'date', min: Date.today.beginning_of_year.try(:strftime, "%Y-%m-%d"), max: Date.today.end_of_year.try(:strftime, "%Y-%m-%d"), class: 'date-picker', data: { 'validation-required-message' => 'You must select end date'}, required: true, value: f.object.end_at.try(:strftime, "%Y-%m-%d")}
= f.input :number_of_days, as: :decimal, label: 'Days', input_html: {step: 1}, input_html: { required: true, :'data-validation-required-message' => 'Enter the number of days', min: "1", :'data-validation-min-message' => "Number of day can't be zero or negative"}, readonly: true
= f.input :contact_number, as: :decimal, label: 'Emergency Contact No.', input_html: {required: true, :'data-validation-required-message' => 'You need to enter your emergency number', type: 'text', maxlength: 10}
= f.input :reason, as: :text, label: 'Reason', input_html: {required: true, :'data-validation-required-message' => 'You have to specify valid reason for leave'}
%center
  = f.submit (params[:action] == "new" ? 'Apply' : 'Save Changes'), class: 'btn'

:javascript
  $("input,select,textarea").not("[type=submit]").jqBootstrapValidation();

  $(document).ready(function(){
    $('form').submit(function(){
      start_date_div = $('#leave_application_start_at')
      end_date_div = $('#leave_application_end_at')
      start_at = new Date(start_date_div.val())
      end_at = new Date(end_date_div.val())
      if(start_date_div.val() && start_at > end_at){
        $("<div class='help-block end_date_error'><ul role='alert'><li>End date can not be less than start date</li></ul></div>").insertAfter(end_date_div)
        end_date_div.parents('.control-group').addClass('error')
        return false
      }else if($('.end_date_error').length){
        end_date_div.parents('.control-group').removeClass('error')
        $('.end_date_error').remove()
      }
    });
    set_number_of_days()
  });

:css
  #leave_application_leave_type_leave, #leave_application_leave_type_wfh {
    height: auto;
  }
